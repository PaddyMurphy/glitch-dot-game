(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(8),r=a.n(o),s=a(2),c=a(3),l=a(6),u=a(4),d=a(5),h=a(1);function m(e,t,a,n,i,o,r){this.dotId=e,this.width=t,this.y=a,this.x=n,this.velocity=r,this.status=i,this.points=o}function f(){var e=this;this.animationDuration=1e3,this.radius=5+5*Math.random(),this.life=30+10*Math.random(),this.remainingLife=this.life,this.speed={x:10*Math.random()-5,y:10*Math.random()-5},this.draw=function(t){var a=e;e.remainingLife>0&&e.radius>0&&(t.beginPath(),t.arc(a.startX,a.startY,a.radius,0,2*Math.PI),t.fill(),t.closePath(),a.remainingLife--,a.radius-=.25,a.startX+=a.speed.x,a.startY+=a.speed.y)}}function p(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}var g,v,b,w=function(e){return i.a.createElement("div",{className:"app-instructions"},"Get points by popping randomly sized dots as they drift down. Smaller dots are worth more points. Use the slider to adjust speed.")},y=function(e){return i.a.createElement("button",{className:e.className,onClick:e.onClick},e.text)},k=function(e){return i.a.createElement("div",{className:e.className},i.a.createElement("label",{htmlFor:e.id,title:e.title},e.label),i.a.createElement("input",{type:"checkbox",id:e.id,name:e.name,onChange:e.onChange,value:e.value}))},E=function(e){return i.a.createElement("div",{className:"app-slider"},i.a.createElement("label",{className:"sr-only",htmlFor:"app-slider"},e.label),i.a.createElement("input",{type:"range",className:e.className,name:e.id,id:e.id,min:e.min,max:e.max,defaultValue:e.velocity,step:"1",onChange:e.onChange}))},j=function(e){return i.a.createElement("div",{className:"app-menu"},i.a.createElement("div",{className:"app-score-wrapper"},i.a.createElement("b",{className:"app-score"},e.score),i.a.createElement(y,{className:"app-btn",onClick:e.toggleGame,text:e.btnText})),i.a.createElement("div",{className:"app-tools"},i.a.createElement(E,{className:"app-slider-input",id:"app-slider",label:"Speed adjustment",min:e.minVelocity,max:e.maxVelocity,onChange:e.sliderChange,velocity:e.velocity}),i.a.createElement(k,{checked:e.brutal,className:"app-brutal",id:"brutal",label:"\ud83d\ude2c",name:"brutal",onChange:e.toggleBrutal,title:"brutal mode substracts points if a dot reaches the end",value:"true"})))},C=(a(15),1),N=1,x=[],D=10,O=[],M=[],P=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).clickDot=a.clickDot.bind(Object(h.a)(Object(h.a)(a))),a.toggleGame=a.toggleGame.bind(Object(h.a)(Object(h.a)(a))),a.toggleBrutal=a.toggleBrutal.bind(Object(h.a)(Object(h.a)(a))),a.runGame=a.runGame.bind(Object(h.a)(Object(h.a)(a))),a.state={score:0,started:!1,paused:!1,brutal:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.initializeCanvas(),this.runGame()}},{key:"componentWillUnmount",value:function(){g.removeEventListener("click",this.clickDot,!1),clearInterval(b)}},{key:"initializeCanvas",value:function(){var e=this;(g=document.getElementById("game")).height=window.innerHeight,g.width=window.innerWidth,v=g.getContext("2d"),g.addEventListener("click",this.clickDot,!1);for(var t=1;t<11;t++)O.push({points:t,actual:11-t});b=window.setInterval(function(){e.checkFocus(),e.addDot()},1e3)}},{key:"checkFocus",value:function(){!!document.hasFocus()||this.state.paused||this.setState({paused:!0})}},{key:"drawDot",value:function(){var e=this.state,t=e.paused,a=e.started;x.forEach(function(e){if(1===e.status){var t=O.find(function(t){return t.points===e.points}),a=.1*Math.round(t.actual);a=a<=.1?.15:a,N=N++,v.beginPath(),v.arc(e.x,e.y,e.width,0,2*Math.PI),v.fillStyle="rgba(29, 133, 240, ".concat(a,")"),v.fill(),v.closePath()}});for(var n=x.length;n>=0;n--)if(x[n]&&!t&&a){var i=D/10*.5;x[n].y=Math.round(x[n].y)+i}}},{key:"addDot",value:function(){if(!this.state.paused&&this.state.started){var e=p(5,50),t=-e,a=p(1,g.width),n=function(e,t,a,n){var i=a-t,o=Math.round((e-t)/i*2);return o=o>10?10:o,n.find(function(e){return e.points===o}).actual}(e,1,10,O);a>g.width-e&&(a-=e),a<=e&&(a=e),x[C++]=new m(C,e,t,a,1,n,D)}}},{key:"sliderChange",value:function(e){D=e.target.valueAsNumber}},{key:"clickDot",value:function(e){var t=this,a={x:e.clientX,y:e.clientY};(x=x.filter(function(e){return e})).forEach(function(e,n){t.isDotClicked(a,e)&&e.status&&(t.addScore(e.points),e.status=0,t.setupParticles(e,a))})}},{key:"isDotClicked",value:function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))<1.1*t.width}},{key:"addScore",value:function(e){this.setState(function(t){return{score:t.score+e}})}},{key:"subtractScore",value:function(e){this.setState(function(t){return{score:t.score-e}})}},{key:"collisionDetection",value:function(){for(var e=x.length;e>=0;e--)x[e]&&x[e].y-x[e].width>=g.height&&(this.state.brutal&&1===x[e].status&&this.subtractScore(x[e].points),x.splice(e,1))}},{key:"toggleGame",value:function(e){this.state.started?this.setState(function(e){return{paused:!e.paused}}):this.setState({started:!0})}},{key:"toggleBrutal",value:function(){this.setState(function(e){return{brutal:!e.brutal}})}},{key:"setupParticles",value:function(e,t){for(var a=2*e.width,n=a,i=0,o=0;o<a;o++)for(var r=0;r<n;r++)i%17===0&&this.createParticleAtPoint(t.x,t.y),i++}},{key:"createParticleAtPoint",value:function(e,t,a){var n=new f;n.startX=e,n.startY=t,n.startTime=Date.now(),M.push(n)}},{key:"animateParticles",value:function(){for(var e=0;e<M.length;e++){if(M[e].draw(v),e===M.length-1)(Date.now()-M[e].startTime)/M[e].animationDuration>1&&(M=[])}}},{key:"runGame",value:function(e){v.clearRect(0,0,g.width,g.height),this.drawDot(),this.collisionDetection(),this.animateParticles(),window.requestAnimationFrame(this.runGame)}},{key:"render",value:function(){var e=this.state,t=e.brutal,a=e.score,n=e.started,o=e.paused,r=!n||o?"START":"PAUSE";return i.a.createElement("div",{className:"app"},i.a.createElement(j,{maxVelocity:100,minVelocity:10,score:a,sliderChange:this.sliderChange,btnText:r,toggleBrutal:this.toggleBrutal,toggleGame:this.toggleGame,velocity:D,checked:t}),!n&&i.a.createElement(w,null),i.a.createElement("div",{className:"app-game"},o&&n&&i.a.createElement("h2",{className:"app-message"},"PAUSED"),i.a.createElement("canvas",{id:"game"})))}}]),t}(n.PureComponent),S=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement(P,null)}}]),t}(n.Component),G=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function B(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(i.a.createElement(S,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/glitch-dot-game",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/glitch-dot-game","/service-worker.js");G?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):B(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):B(e)})}}()},9:function(e,t,a){e.exports=a(17)}},[[9,2,1]]]);
//# sourceMappingURL=main.16715210.chunk.js.map